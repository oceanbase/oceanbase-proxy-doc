# ODP Community Edition V4.1.0

## V4.1.0

### Version information

* Release date: March 20, 2023

* Version: V4.1.0

### Overview

* Different proxyro passwords can be specified for different clusters.

* The rich client feature is supported.

* A server IP address can be specified in IP address-based routing.

* The Latin1 character set is supported.

* Connection attributes with special prefixes can be transparently transmitted.

* Distributed transaction routing is supported.

* MySQL binlogs are supported.

* Read/Write splitting and transaction splitting are supported.

* Mappings between VIPs and clusters/tenants can be configured without using MetaDB.

* Global parameters are supported for weak-consistency read and read-only operations.

* The geographic information system (GIS) and JSON data types are supported.

* IPv6 is supported.

* Accurate routing is supported for access to the sys tenant in QA mode.

* ROWID routing is supported in PS mode.

* Multi-partitioning key routing is supported.

* Routing is supported in obtaining the default values of columns.

* Expression-based calculation is supported for nvl, sysdate, mod, to_char, and substr.

* Routing is supported for IS NULL and IS NOT NULL.

* The XA_START statement can be held.

### Feature updates

* The recovery time objective (RTO) is reduced to a value less than 8s.

* The OceanBase 2.0 protocol is optimized to reduce the statements for synchronization.

* An error packet will be sent to the client if ODP actively disconnects from the client.

* Global-level PS cache is supported.

* The default value of `client_sock_option_flag_out` is changed from `2` to `3`.

* Trace IDs of OBServer nodes will be recorded in the obproxy_error.log file.

* The connection memory and PS memory are optimized.

* The RTO in keepalive detection is optimized. ODP considers that the client is normal if it receives a handshake packet from the client.

* The default character set for handshake packets is changed to 46.

* The `enable_binlog_service` parameter is added for enabling or disabling the binlog service. The default value is `False`.

### Bug fixes

* Fixed the issue that a core dump occurs when you access a partitioned table by carrying the row ID.

* Fixed the issue where no information is returned after a prepared statement is deleted when the OceanBase 2.0 protocol is enabled between the client and ODP.

* Fixed the issue where the error "requestId mismatch" is returned if an SQL statement is executed after a PREPARE statement is executed in the case of an exception, when the OceanBase 2.0 protocol is enabled between the client and ODP.

* Fixed the issue that the client is hung because the error packet returned for an internal SQL statement is in an incorrect format.

* Fixed the issue where disconnection occurs if the error 4016 is returned when the OceanBase 2.0 protocol is enabled.

* Fixed the issue where disconnection occurs during SQL rerouting when `enable_ob_protocol_v2_with_client` is set to `True`.

* Fixed the issue that ODP is disconnected due to connection ID mismatch.

* Fixed the issue that disconnection occurs after the compression protocol is enabled.

* Fixed the issue that if the username in the COM_CAHNGE_USER command is not in the user_name@tenant_name format, the command cannot be used.

* Fixed the issue of inaccurate routing for the DATE type in some scenarios.

* Fixed the issue of core dump caused by the abnormal `to_timestamp` parameter.

* Fixed the issue where a core dump occurs when an anonymous block is executed in OceanBase Developer Center (ODC).

* Fixed the issue of remote routing for the to_date() function.

* Fixed the issue of inaccurate routing for LIST partitions of the timestamp with local time zone type.

* Fixed the issue where a core dump occurs if no pointer is specified for some keywords.

* Fixed the issue where an OBServer node cannot be removed from the blocklist after being added to the blocklist by the detection optimization feature.

* Fixed the issue of SSL configuration acquisition failure.

* Fixed the issue that the cluster cannot be connected after CPU resource isolation is enabled in the public cloud.

* Fixed the issue where the vid configuration that uses the INT form does not take effect.

* Fixed the issue that the subscript of the substr() function is out of range.

* Fixed the issue that calculation errors occur for RANGE partitions under the condition `where c1 >20`.

* Fixed the issue where routing fails due to a type conversion failure that occurs when a LIST- or LIST COLUMNS-partitioned table contains NULL values.

* Fixed the issue of core dump caused by global PS.

* Fixed the issue where the `autocommit` value in the OK packet is still `1` after the `SET autocommit=0` command is executed.

* Fixed the issue where disconnection occurs when some fields of RespResult are not initialized in constructor functions.

* Fixed the issue of supported complex parameter types in XA_START hold & sync after the PreparedStatement and PrepareExecute protocols are enabled.

* Fixed the issue that multiple OceanBase 2.0 packets are not accepted during XA_START hold & sync.
