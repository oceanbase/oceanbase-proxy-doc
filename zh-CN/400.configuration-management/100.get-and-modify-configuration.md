# 配置项说明

本文简要介绍如何查看和修改 ODP 中的配置项。

## 参数说明

在使用 ODP 时，您可以根据需要配置 ODP 配置项，ODP 配置项根据修改后的生效情况可以分为以下两类：

* 支持动态修改的配置项

  此类配置项修改后立即生效。详细信息请参考 [动态生效配置项](200.dynamically-effective/40.binlog-service_ip.md)。
  
* 不支持动态修改的配置项

  此类配置项修改后需要重启 ODP 才能生效。详细信息请参考 [重启生效配置项](300.restart-takes-effect/30.automatic_match_work_thread.md)。

<main id="notice" type='notice'>
  <h4>注意</h4>
  <p>对于所有 time 类型（单位支持 us、ms、s、m、h、d，不区分大小写，默认为 s）、capacity 类型（单位支持 b、byte、kb、k、mb、m、gb、g、tb、t、pb、p，不区分大小写，默认为 mb）的配置项, 如果其取值范围为 [0,xxx]，在更新配置时可以将其值设置为负数，此时通过 <code>ob_all_proxy_config</code> 表或者 ODP 内部查询命令 <code>show proxyconfig</code> 查询出的结果也是负数, 但实际上 ODP 内部仍将其转换成 <code>0</code> 来处理。</p>
</main>

## 查看配置项

您可参考如下步骤查看 ODP 中的配置项

1. 使用 `root@sys` 用户通过 ODP 代理登录 OceanBase 数据库，或使用 `root@proxysys` 用户登录 ODP

   使用 `root@sys` 用户登录 OceanBase 数据库示例如下，详细参数介绍可参见《OceanBase 数据库》文档 [通过 OBClient 连接 OceanBase 租户](https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000000218474)。

   ```shell
   [admin@obtest ~]$ obclient -uroot@sys#obcluster -h10.10.10.1 -P2883 -p
   ```

   <main id="notice" type='notice'>
     <h4>注意</h4>
     <p>若要在 OceanBase 数据库中使用 ODP 命令，连接 OceanBase 数据库的连接 IP（<code>-h</code>）和连接端口（<code>-P</code>）需为 ODP 的地址和监听端口（<code>listen_port</code>）</p>
   </main>

   使用 `root@proxysys` 用户登录 ODP 示例如下，此处的连接 IP（`-h`）为 ODP 的地址，连接端口（`-P`）为 ODP 的监听端口（`listen_port`）。

   ```shell
   [admin@obtest ~]$ obclient -uroot@proxysys -h10.10.10.1 -P2883 -p
   ```

2. 执行如下命令可获取 ODP 配置项：

   ```sql
   SHOW proxyconfig [LIKE '%var_name%'];
   ```

## 修改配置项

您可以使用以下方式修改 ODP 配置项。

* 在 ODP 启动时，启动命令中添加 `-o` 选项修改配置项：

  ```shell
  -o <var_name> = <var_value>
  ```

* 在 ODP 运行时，使用 `root@proxysys` 用户登录 ODP 后，执行如下命令修改 ODP 配置项：

  ```sql
  ALTER proxyconfig SET <var_name> = <var_value>
  ```
