# OceanBase 数据库代理企业版 V4.1.0

## V4.1.0 BP2

### 版本信息

* 发布时间：2023 年 6 月 28 日

* 版本号：V4.1.0 BP2

* RPM 版本号：obproxy-4.1.0.0-20230628180544

### 缺陷修复

* 修复升级过程中事务路由重开协调者的场景以及 sess info 同步问题。

* 修复 Error 包场景下的 session info 同步问题。

* 修复内部 SQL 不按照指定 IP 路由的问题。

* 修复 xa_start hold 后执行 SQL 断连的问题。

* 修复 ODP 解析模块可能导致内存泄漏的问题。

* 修复 mock 模式和 target_db_server 指定 IP 两种路由方式同时存在时，target_db_server 0.0.0.0:0 0 端口非法，ODP 直接断连没有重试其他 OBServer 节点 IP 的问题。

* 修复 Global 级别指定路由 IP，第一个IP是 Log 副本，实际出 core 没有正常重试到可用 IP 的问题。

* 修复指定 IP 为 ODP 自身，ODP 循环转发导致客户端 hang 住的问题。

* 修复指定 IP 为 127.0.0.1 时断连接的问题。

* 修复只修改 last_insert_id 导致的无法建连问题。

* 修复配置变更导致 CPU 爆满，业务 SQL 性能抖动问题。

## V4.1.0 BP1

### 版本信息

* 发布时间：2023 年 4 月 13 日

* 版本号：V4.1.0 BP1

* RPM 版本号：obproxy-4.1.0.0-20230413171222

### 缺陷修复

* 修复执行 `prepare st1 from @A` 时集群发生断连的问题。

* 修复随机路由与预期行为不符的问题。

* 修复指定一级分区路由的问题。

## V4.1.0

### 版本信息

* 发布时间：2023 年 3 月 23 日

* 版本号：V4.1.0

* RPM 版本号：obproxy-4.1.0.0-20230323104822

### 发版目的

* 支持指定 Server IP 路由

* 支持 latin1 字符集

* 支持透传带有特殊前缀的 connection attr

* 支持分布式事务路由

### 功能优化

* RTO 优化，小于 8S。

* OceanBase 2.0 协议优化，减少同步语句。

* ODP 主动断连接，会发送 Error 包到客户端。
