# OceanBase 数据库代理企业版 V3.2.11

## V3.2.11 BP4 hotfix1

### 版本信息

* 发布时间：2023 年 10 月 09 日

* 版本号：V3.2.11 BP4 hotfix1

* RPM 版本号：obproxy-3.2.11.0-20231009180400

### 缺陷修复

* 修复 ODP 探活时访问的 OBServer 节点 IP 和使用的 cluster_name 不匹配，导致 OBServer 节点被误加入黑名单中的问题。

* 修复带 cluster_name 设置全局配置，配置表信息更新异常的问题。

* 修复连接 ODP 执行文件 PS，同一个 session 中第二次 prepare 时稳定断连的问题。

* 修复 `show proxysession stat id` 执行失败的问题。

* 修复安全编译选项下 lbt() 打印堆栈错误的问题。

* 修复全局配置指定 IP 路由验证不生效的问题。

* 修复 PS 内存泄漏导致程序退出的问题。

* 修复 ODP 开启高可用开关后，会出现概率性连接 Binlog 服务失败的问题。

* 修复对 Binlog 的容灾检查条件判断问题。

## V3.2.11 BP4

### 版本信息

* 发布时间：2023 年 08 月 28 日

* 版本号：V3.2.11 BP4

* RPM 版本号：obproxy-3.2.11.0-20230828095237

### 缺陷修复

* 修复程序运行断链接问题。

* 修复 ARM 环境下开启 enable_ldg 设置，iptables 设置节点网络故障，ODP core 的问题。

## V3.2.11 BP3

### 版本信息

* 发布时间：2023 年 08 月 11 日

* 版本号：V3.2.11 BP3

* RPM 版本号：obproxy-3.2.11.0-20230811141951

### 缺陷修复

* 修复热升级过程进程退出的问题。

* 修复配置抖动的问题。

* 修复 Binlog dump 回包识别问题。

* 修复 ODP 解析模块潜在可能导致内存泄漏的问题。

## V3.2.11 BP2

### 版本信息

* 发布时间：2023 年 04 月 19 日

* 版本号：V3.2.11 BP2

* RPM 版本号：obproxy-3.2.11.0-20230419145302

### 缺陷修复

修复空闲断连接后某些场景新请求导致 ODP core 掉的问题。

## V3.2.11 BP1

### 版本信息

* 发布时间：2023 年 04 月 06 日

* 版本号：V3.2.11 BP1

* RPM 版本号：obproxy-3.2.11.0-20230406144131

### 发版目的

新增配置项 `obproxy_force_parallel_query_dop`，支持修改 OceanBase 数据库的查询并行度。

## V3.2.11

### 版本信息

* 发布时间：2023 年 04 月 03 日

* 版本号：V3.2.11

* RPM 版本号：obproxy-3.2.11.0-20230403112629

### 发版目的

* 支持 ODP Protocol V2 协议获取跨 VPC 下的客户端 IP 以及白名单设置。

* 支持指定 IP 路由。

* 支持十六进制数据解析。

  <main id="notice" type='notice'>
     <h4>注意</h4>
     <p>文本二进制数据会扩大一倍整体请求数据长度，如果 request_buffer 超限（默认为 4096KB）时没解析到分区计算依赖的信息，ODP 将继续随机路由（可以扩大 buffer，或者容忍这部分请求随机路由）。</p>
  </main>

* 支持 subpartition 关键字。

* 支持 ODP 主动断连接时发送 Error 包到客户端。

### 缺陷修复

* 修复 PS 相关的 core 问题。

* 修复内部连接 Hung 住的问题。

* 修复 ObMysqlClient 并发没有释放的问题。

* 修复本文 PS 大小写敏感导致断连接问题。
